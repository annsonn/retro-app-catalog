!function(b){var c=/\{\{\{[\s\S]+?\}\}\}|\{\{[\s\S]+?\}\}/g;b.languages.handlebars=b.languages.extend("markup",{handlebars:{pattern:c,inside:{delimiter:{pattern:/^\{\{\{?|\}\}\}?$/i,alias:"punctuation"},string:/(["'])(\\?.)*?\1/,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee][+-]?\d+)?)\b/,boolean:/\b(true|false)\b/,block:{pattern:/^(\s*~?\s*)[#\/]\S+?(?=\s*~?\s*$|\s)/i,lookbehind:!0,alias:"keyword"},brackets:{pattern:/\[[^\]]+\]/,inside:{punctuation:/\[|\]/,variable:/[\s\S]+/}},punctuation:/[!"#%&'()*+,.\/;<=>@\[\\\]^`{|}~]/,variable:/[^!"#%&'()*+,.\/;<=>@\[\\\]^`{|}~\s]+/}}}),b.languages.insertBefore("handlebars","tag",{"handlebars-comment":{pattern:/\{\{![\s\S]*?\}\}/,alias:["handlebars","comment"]}}),b.hooks.add("before-highlight",function(b){"handlebars"===b.language&&(b.tokenStack=[],b.backupCode=b.code,b.code=b.code.replace(c,function(c){for(var a=b.tokenStack.length;-1!==b.backupCode.indexOf("___HANDLEBARS"+a+"___");)++a;return b.tokenStack[a]=c,"___HANDLEBARS"+a+"___"}))}),b.hooks.add("before-insert",function(a){"handlebars"===a.language&&(a.code=a.backupCode,delete a.backupCode)}),b.hooks.add("after-highlight",function(c){if("handlebars"===c.language){for(var a=0,d=Object.keys(c.tokenStack);a<d.length;++a){var e=d[a],f=c.tokenStack[e];c.highlightedCode=c.highlightedCode.replace("___HANDLEBARS"+e+"___",b.highlight(f,c.grammar,"handlebars").replace(/\$/g,"$$$$"))}c.element.innerHTML=c.highlightedCode}})}(Prism);