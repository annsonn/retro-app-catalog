(function(){'undefined'!==typeof self&&self.Prism&&self.document&&document.createRange&&(Prism.plugins.KeepMarkup=!0,Prism.hooks.add('before-highlight',function(a){if(a.element.children.length){var b=0,c=[],d=function(a,e){var f={};e||(f.clone=a.cloneNode(!1),f.posOpen=b,c.push(f));for(var g,h=0,i=a.childNodes.length;h<i;h++)g=a.childNodes[h],1===g.nodeType?d(g):3===g.nodeType&&(b+=g.data.length);e||(f.posClose=b)};d(a.element,!0),c.length&&(a.keepMarkup=c)}}),Prism.hooks.add('after-highlight',function(a){if(a.keepMarkup&&a.keepMarkup.length){var b=function(a,c){for(var d,e=0,f=a.childNodes.length;e<f;e++){if(d=a.childNodes[e],1!==d.nodeType)3===d.nodeType&&(!c.nodeStart&&c.pos+d.data.length>c.node.posOpen&&(c.nodeStart=d,c.nodeStartPos=c.node.posOpen-c.pos),c.nodeStart&&c.pos+d.data.length>=c.node.posClose&&(c.nodeEnd=d,c.nodeEndPos=c.node.posClose-c.pos),c.pos+=d.data.length);else if(!b(d,c))return!1;if(c.nodeStart&&c.nodeEnd){var g=document.createRange();return g.setStart(c.nodeStart,c.nodeStartPos),g.setEnd(c.nodeEnd,c.nodeEndPos),c.node.clone.appendChild(g.extractContents()),g.insertNode(c.node.clone),g.detach(),!1}}return!0};a.keepMarkup.forEach(function(c){b(a.element,{node:c,pos:0})}),a.highlightedCode=a.element.innerHTML}}))})();